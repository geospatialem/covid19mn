function getZoomNumber(){return document.documentElement.clientHeight>=900?7:6}const map=L.map("covidmap").setView([46.37,-93.88],getZoomNumber()),EsriDarkGrayCanvas=L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}").addTo(map),EsriDarkGrayCanvasRef=L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer/tile/{z}/{y}/{x}").addTo(map);function setColor(popRate){return popRate>166.5?"#000":popRate>70.3?"#006d2c":popRate>36.5?"#31a354":popRate>18.1?"#74c476":popRate>6?"#bae4b3":"#edf8e9"}const mnCovidData=new L.GeoJSON.AJAX("data/mnCOVID19Data.json",{attribution:"Data: <a href='https://www.health.state.mn.us/'>Minnesota Department of Health</a> | Map & Analysis: <a href='http://geospatialem.github.io'>Kitty Hurley</a>",style:function(feature){return{color:"#D3D3D3",weight:1,fillColor:setColor(feature.properties.CASES_100K),fillOpacity:.75,opacity:1,clickable:!0}},onEachFeature:function(feature,layer){layer.bindPopup("<h2>"+feature.properties.NAME+" County</h2><b>Cases per 100,000 people: "+feature.properties.CASES_100K.toFixed(1)+"</b><br /><b>Deaths per 100,000 people: "+feature.properties.DEATHS_100K.toFixed(1)+"</b><br /><br />Cases: "+feature.properties.CASES.toFixed(0)+"<br />Deaths: "+feature.properties.DEATHS.toFixed(0)+"<br /><br /><i>Last updated: Mon., 4/6</i>")}}).addTo(map),mapLegend=L.control();mapLegend.onAdd=function(map){return this._div=L.DomUtil.create("div","mapLegend"),this.update(),this._div},mapLegend.update=function(){this._div.innerHTML='<h4>COVID-19 in Minnesota<span style="display:block;font-size:0.75em">Cases per 100,000 people</span></h4><img src="images/legend.png" width="95" height="90" alt=""><p><i>Updated Mon., 4/6</i></p>'},mapLegend.addTo(map);